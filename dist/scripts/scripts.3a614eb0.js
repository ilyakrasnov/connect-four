"use strict";angular.module("connectFourApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/play",{templateUrl:"views/play.html",controller:"PlayCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("connectFourApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("connectFourApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("connectFourApp").factory("Settings",function(){var a=[6,7],b={players:["one","two"],ranges:function(){return[_.range(1,a[0]+1).reverse(),_.range(1,a[1]+1)]},board:_.map([1,2,3,4,5,6,7],function(){return[]}),getBoardDimension:function(b){return _.range(1,a[b]+1).reverse()},fill:function(a){this.board[a-1].push("X")},resetBoard:function(){this.board=_.map([1,2,3,4,5,6,7],function(){return[]})}};return b}),angular.module("connectFourApp").controller("PlayCtrl",["$scope","Settings","Tales","Game",function(a,b,c,d){a.settings=b,a.game=d,a.tales=c}]),angular.module("connectFourApp").factory("Tales",function(){var a={tale_check:function(){}};return a}),angular.module("connectFourApp").factory("Game",["Settings",function(a){var b=a.board,c=function(a){var b=0,c="",d=!1;return _.each(a,function(a){void 0!=a&&a==c?b+=1:(c=a,b=1),4==b&&(d=!0)}),d},d=function(){var a=_.zip.apply(null,b),d=e(),f=[b,a,d];return void 0!=_.find(f,function(a){return _.find(a,c)?!0:void 0})?!0:void 0},e=function(){for(var a=[],c=[],d=_.map(b,function(a){return _.compact(a).length}),e=b[_.indexOf(d,_.max(d))].length,f=b.length,g=0;f+e-1>g;g++){var h=e>g?0:g-e+1,i=f>g?0:g-f+1;a.push([]);for(var j=g-i;j>=h;--j)a[g].push(b[j][g-j])}for(var g=0;f+e-1>g;g++){var h=e>g?0:g-e+1,i=f>g?0:g-f+1;c.push([]);for(var j=g-i;j>=h;--j)c[g].push(b[f-j-1][g-j])}return a.concat(c)},f={fill:function(a,c){!this.checkWin()&&b[a-1].length<6&&b[a-1].push(c)},moves:function(){return _.flatten(a.board).length},player:function(){return a.players[this.moves()%2]},checkWin:function(){return d()},playAgain:function(){a.resetBoard()}};return f}]);